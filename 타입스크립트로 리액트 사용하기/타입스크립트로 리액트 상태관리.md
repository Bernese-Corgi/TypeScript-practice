# 타입스크립트로 리액트 상태관리하기

- [타입스크립트로 리액트 상태관리하기](#타입스크립트로-리액트-상태관리하기)
  - [useState](#usestate)
    - [Generics를 사용해 타입 지정하기](#generics를-사용해-타입-지정하기)
  - [Input 상태 관리](#input-상태-관리)
    - [e 객체의 타입](#e-객체의-타입)
    - [form 작성하기](#form-작성하기)

## useState

### Generics를 사용해 타입 지정하기

기본적으로 generics를 사용하지 않아도 자동으로 타입을 유추할 수 있다.

```tsx
function Counter() {
  // generics를 사용하지 않아도 타입을 유추할 수 있다.
  const [count, setCount] = useState(0);
  // ...
}
```

![image](https://user-images.githubusercontent.com/72931773/129469573-64362c2d-18c0-4e10-9a6c-01e3b594cd60.png)


**Generics를 사용하는 경우**

Generics는 상태가 `null`일 수도 있고 아닐수도 있을 때 사용한다.

```tsx
type Information = { name: string; description: string };

function Comp() {
  const [info, setInformation] = useState(null);
  // ...
}

export default Comp;
```

![image](https://user-images.githubusercontent.com/72931773/129469637-c9528f72-d8fe-428a-81f1-af4ce405623d.png)


```tsx
type Information = { name: string; description: string };

function Comp() {
  const [info, setInformation] = useState<Information | null>(null);
  // ...
}

export default Comp;
```

![image](https://user-images.githubusercontent.com/72931773/129469671-9bd8a03a-2e1c-4ed0-855c-1f1d7c1c1591.png)


## Input 상태 관리

### e 객체의 타입

**`onChange`의 `e` 객체의 타입** : `React.ChangeEvent<HTMLInputElement>`이다.

![image](https://user-images.githubusercontent.com/72931773/129469723-12a9be00-7cab-4a73-ada4-d634e45ceb12.png)

이벤트 함수의 매개변수 e 객체에 타입을 지정해준다.

```tsx
const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {
  //
};
```

**`onSubmit`의 `e` 객체의 타입** : `React.FormEvent<HTMLFormElement>`이다.


이벤트 함수의 매개변수 e 객체에 타입을 지정해준다.

```tsx
const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {
  //
};
```

![image](https://user-images.githubusercontent.com/72931773/129469827-5a484ef5-b634-4a7b-84e0-793727569b40.png)

### form 작성하기

타입 앨리어스로 form에 사용될 props들의 타입을 지정한다.

```tsx
import React, { useState } from 'react';

type MyFormProps = {
  onSubmit: (form: { name: string; description: string }) => void;
};
```

useState를 사용해 상태를 관리하고, 이벤트 핸들러를 등록한다.

```tsx
const MyForm = ({ onSubmit }: MyFormProps) => {
  const [form, setForm] = useState({
    name: '',
    description: '',
  });

  const { name, description } = form;

  const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const { name, value } = e.target;
    // 기존 form 내용을 넣고, name의 값을 덮어씌운다.
    setForm({
      ...form, // 기존 form 내용을 넣는다.
      [name]: value, // value : 이벤트 객체에서 가져온 value 값 = 사용자가 바꾸려고 하는 값
    });
  };

  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {
    e.preventDefault();
    onSubmit(form); // onSubmit에 form을 넣어서 호출
    setForm({
      name: '',
      description: '',
    }); // 초기화
  };

  return (
    <form onSubmit={handleSubmit}>
      <input name="name" value={name} onChange={onChange} />
      <input name="description" value={description} onChange={onChange} />
      <button type="submit">등록</button>
    </form>
  );
};

export default MyForm;
```

App 컴포넌트에서 MyForm을 불러온다.

```tsx
import React from 'react';
import MyForm from './MyForm';

const App: React.FC = () => {
  const onSubmit = (form: { name: string; description: string }) => {
    console.log(form);
  };

  return (
    <div>
      <MyForm onSubmit={onSubmit} />
    </div>
  );
};

export default App;
```